<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link rel="stylesheet" type="text/css" href="style.css" />
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css"> -->
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Shrikhand&display=swap" rel="stylesheet">
    <title>
        Sports Betting</title>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="dashboardstyle2.css">
</head>

<body>

    <div class="flex bg-gray-200 w-full h-full">
        <div class="flex bg-blue-200 h-full w-2/12 text-center">
            1
        </div>
        <div class="flex flex-col bg-blue-800 h-full w-5/6">
            <div class="flex h-20 bg-gray-600">
                2
            </div>


            <input type="text" id="myInput" onkeyup="myFunction2()" name="q">

            <style>
                li {
                    display: inline-block;
                }
            </style>

            <div class="flex overflow-x-auto">

                <ul class="flex" id="myUL">

                    <li><a href="#">Green Bay Packers</a></li>

                    <li><a href="#">New England Patriots</a></li>
                    <li><a href="#">Cardinals</a></li>

                    <li><a href="#">Philadelphia Eagles</a></li>
                    <li><a href="#">Chicago Bears</a></li>
                    <li><a href="#">Los Angeles Rams</a></li>


                    <li><a href="https://www.panthers.com/">Carolina Panthers</a></li>
                    <li><a href="#">Green Bay Packers</a></li>

                    <li><a href="#">New England Patriots</a></li>
                    <li><a href="#">Cardinals</a></li>

                    <li><a href="#">Philadelphia Eagles</a></li>
                    <li><a href="#">Chicago Bears</a></li>
                    <li><a href="#">Los Angeles Rams</a></li>



                    <li><a href="https://www.panthers.com/">Carolina Panthers</a></li>
                    <li><a href="#">Green Bay Packers</a></li>

                    <li><a href="#">New England Patriots</a></li>
                    <li><a href="#">Cardinals</a></li>

                    <li><a href="#">Philadelphia Eagles</a></li>
                    <li><a href="#">Chicago Bears</a></li>
                    <li><a href="#">Los Angeles Rams</a></li>


                    <li><a href="https://www.panthers.com/">Carolina Panthers</a></li>
                    <li><a href="#">Green Bay Packers</a></li>

                    <li><a href="#">New England Patriots</a></li>
                    <li><a href="#">Cardinals</a></li>

                    <li><a href="#">Philadelphia Eagles</a></li>
                    <li><a href="#">Chicago Bears</a></li>
                    <li><a href="#">Los Angeles Rams</a></li>
                </ul>
            </div>

            <div class="flex flex-col h-full bg-white p-6" id="cardHolder">
                <div class="flex h-10 m-4" id="myUL">
                    <input class="flex" type="text" id="myInput" name="q" placeholder="hehehehehehehh"
                        onkeyup="setTimeout(debounceSearch(), 3000)">
                    <div class="flex h-10"><a class="flex" href="https://www.azcardinals.com/">
                            Arizona Cardinals </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.atlantafalcons.com/"> Atlanta
                            Falcons </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.baltimoreravens.com/">
                            Baltimore Ravens </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.buffalobills.com/"> Buffalo
                            Bills </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.panthers.com/">
                            Carolina Panthers </a></div>
                    <div class="flex h-10 "><a class="flex" href="https://www.chicagobears.com/"> Chicago
                            Bears </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.bengals.com/">
                            Cincinnati Bengals </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.dallascowboys.com/"> Dallas
                            Cowboys </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.denverbroncos.com/"> Denver
                            Broncos </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.detroitlions.com/"> Detroit
                            Lions </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.packers.com/"> Green
                            Bay Packers </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.houstontexans.com/"> Houston
                            Texans </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.colts.com/">
                            Indianapolis Colts </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.jaguars.com/">
                            Jacksonville Jaguars </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.chiefs.com/"> Kansas
                            City Chiefs </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.chargers.com/"> Los
                            Angeles Chargers </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.therams.com/"> Los
                            Angeles Rams </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.miamidolphins.com/"> Miami
                            Dolphins </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.vikings.com/">
                            Minnesota Vikings </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.patriots.com/"> New
                            England Patriots </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.neworleanssaints.com/"> New
                            Orleans Saints </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.giants.com/"> New York
                            Giants </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.newyorkjets.com/"> New York
                            Jets </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.raiders.com/"> Oakland
                            Raiders </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.philadelphiaeagles.com/">
                            Philadelphia Eagles </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.steelers.com/">
                            Pittsburgh Steelers </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.49ers.com/"> San
                            Francisco 49ers </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.seahawks.com/"> Seattle
                            Seahawks </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.buccaneers.com/">
                            Tampa Bay Buccaneers </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.titansonline.com/">
                            Tennessee Titans </a></div>
                    <div class="flex h-10"><a class="flex" href="https://www.redskins.com/">
                            Washington Redskins </a></div>
                </div>

                <div class="hidden flex-col justify-center bg-blue-500 rounded-lg m-4 " id="gameCard">
                    <div>
                        <div class="flex flex-col justify-center p-2">
                            <div class="flex justify-center">
                                <p class="text-center text-4xl" id="teamNames">Home vs Away</p>
                            </div>
                            <div class="flex justify-center">
                                <p class="text-center text-2xl" id="gameOdds">Odds:</p>
                            </div>
                            <div class="flex justify-center">
                                <p class="text-center text-2xl" id="gameDate">Date:</p>
                            </div>
                        </div>
                        <div class="flex justify-around p-2">
                            <div class="flex">
                                <button
                                    class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full homeBet">
                                    Bet on Home
                                </button>
                            </div>
                            <div class="flex">
                                <input
                                    class="betAmount shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                    type="number" name="quantity" min="1" id="betField" placeholder="Bet Amount">
                            </div>
                            <div class="flex">
                                <button
                                    class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full awayBet">
                                    Bet on Away
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>




            <div class="flex flex-col h-full bg-white p-6" id="cardHolder">

                <div class="hidden flex-col justify-center bg-blue-500 rounded-lg m-4 " id="gameCard">
                    <div>
                        <div class="flex flex-col justify-center p-2">
                            <div class="flex justify-center">
                                <p class="text-center text-4xl" id="teamNames">Home vs Away</p>
                            </div>
                            <div class="flex justify-center">
                                <p class="text-center text-2xl" id="gameOdds">Odds:</p>
                            </div>
                            <div class="flex justify-center">
                                <p class="text-center text-2xl" id="gameDate">Date:</p>
                            </div>
                        </div>
                        <div class="flex justify-around p-2">
                            <div class="flex">
                                <button
                                    class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full homeBet">
                                    Bet on Home
                                </button>
                            </div>
                            <div class="flex">
                                <input
                                    class="betAmount shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                    type="number" name="quantity" min="1" id="betField" placeholder="Bet Amount">
                            </div>
                            <div class="flex">
                                <button
                                    class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full awayBet">
                                    Bet on Away
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>







    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="module">
        // const menuIconEl = $('.menu-icon');
        // const sidenavEl = $('.sidenav');
        // const sidenavCloseEl = $('.sidenav__close-icon');

        // // Add and remove provided class names
        // function toggleClassName(el, className) {
        //   if (el.hasClass(className)) {
        //     el.removeClass(className);
        //   } else {
        //     el.addClass(className);
        //   }
        // }

        // // Open the side nav on click
        // menuIconEl.on('click', function() {
        //   toggleClassName(sidenavEl, 'active');
        // });

        // // Close the side nav on click
        // sidenavCloseEl.on('click', function() {
        //   toggleClassName(sidenavEl, 'active');
        // });
        const api_key = '7cdcedbd24cadaaa02107e695738d034'
        let sport_key = "americanfootball_nfl"
        export async function getOdds(id) {
            const odds = await axios.get('https://api.the-odds-api.com/v3/odds', {
                params: {
                    api_key: api_key,
                    sport: sport_key,
                    region: 'us', // uk | us | au
                    mkt: 'h2h' // h2h | spreads | totals
                }
            });
            console.log('Remaining requests', odds.headers['x-requests-remaining'])
            return odds.data.data;
        };
        async function printOdds() {
            var gameOdds = [];
            let result = await getOdds();
            console.log(result);
            //let result = result.data;
            for (let i = 0; i < result.length; i++) {
                var odds = {};
                console.log(result[0])
                odds["Home"] = result[i].home_team;
                if (odds["Home"] === result[i].teams[0]) {
                    odds["odds"] = avgOdds(result[i].sites, 0);
                    odds["Away"] = result[i].teams[1];
                } else {
                    odds["odds"] = avgOdds(result[i].sites, 1);
                    odds["Away"] = result[i].teams[0];
                }
                odds["date"] = getDate(result[i].commence_time);

                gameOdds.push(odds);
            }
            console.log(gameOdds[0].Home);
            for (let i = 0; i < gameOdds.length; i++) {
                let clone = document.getElementById("gameCard").cloneNode(true);

                let id = (gameOdds[i].Home + "|" + gameOdds[i].Away).replace(/ /g, "_");
                console.log(id);
                clone.id = id;
                let names = clone.querySelector("#teamNames");
                names.innerHTML = gameOdds[i].Home + " vs " + gameOdds[i].Away;
                let oddsHtml = clone.querySelector("#gameOdds");
                oddsHtml.innerHTML = "Odds: " + gameOdds[i].odds[0].toString().substring(0, 4) + " , " + gameOdds[i].odds[1].toString().substring(0, 4);
                let gameDate = clone.querySelector("#gameDate");
                gameDate.innerHTML = gameOdds[i].date;
                clone.style.display = "flex";
                // clone.querySelector(".selectTeam").options[1].innerHTML = gameOdds[i]["Home"];
                // clone.querySelector(".selectTeam").options[2].innerHTML = gameOdds[i]["Away"];
                clone.querySelector(".homeBet").addEventListener("click", function () {
                    //var card = event.target.parentElement.parentElement;
                    //console.log(event.target.parentElement.parentElement.childNodes);
                    //let parent = event.target.parentElement.parentElement.querySelector(".betAmount").value;
                    let amount = event.target.parentElement.parentElement.querySelector(".betAmount").value;
                    console.log(amount);
                    //let id = event.target.parentElement.parentElement.id;
                    //var home;

                    buttonEvent(amount, gameOdds[i], true);
                    //viewReplies(id, card);
                });

                clone.querySelector(".awayBet").addEventListener("click", function () {
                    //var card = event.target.parentElement.parentElement;
                    // let amount = event.target.previousSibling.previousSibling.value;
                    // console.log(event.target.previousSibling.previousSibling.value);
                    // let id = event.target.parentElement.parentElement.id;
                    // var home;
                    let amount = event.target.parentElement.parentElement.querySelector(".betAmount").value;
                    console.log(amount);

                    buttonEvent(amount, gameOdds[i], false);
                    //viewReplies(id, card);
                });

                document.getElementById("cardHolder").appendChild(clone);
            }
        }
        function getDate(UNIX_timestamp) {
            var a = new Date(UNIX_timestamp * 1000);
            var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var year = a.getFullYear();
            var month = months[a.getMonth()];
            var date = a.getDate();
            var hour = a.getHours();
            var min = a.getMinutes();
            var sec = a.getSeconds();
            var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec;
            return time;
        }
        function avgOdds(sites, home) {
            let firstOdd = 0;
            let secondOdd = 0;
            for (let i = 0; i < sites.length; i++) {
                firstOdd += sites[i].odds.h2h[0];
                secondOdd += sites[i].odds.h2h[1];
            }
            if (home === 0) {
                return [firstOdd / sites.length, secondOdd / sites.length];
            }
            return [secondOdd / sites.length, firstOdd / sites.length];

        }
        printOdds();

        function buttonEvent(amount, gameObj, homeBool) {
            console.log(amount);
            console.log(gameObj);
            console.log(homeBool);
        }
    </script>
    <!-- <script type="module" src="script.js"></script> -->

    <!-- debounce script -->

    <script>




        var button = document.getElementById("myInput");
        const debounce = (func, delay) => {
            let debounceTimer
            return function () {

                const context = this
                const args = arguments
                clearTimeout(debounceTimer)
                debounceTimer
                    = setTimeout(() => func.apply(context, args), delay)
            }
        }
        button.addEventListener('click', debounce(function () {
            var input, filter, ul, li, a, i, txtValue;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            ul = document.getElementById("myUL");
            li = ul.getElementsByTagName("div");
            for (i = 0; i < li.length; i++) {
                a = li[i].getElementsByTagName("a")[0];
                txtValue = a.textContent || a.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    li[i].style.display = "";
                } else {
                    li[i].style.display = "none";
                }
            }
        }

            , 3000));




    </script>
</body>



</html>